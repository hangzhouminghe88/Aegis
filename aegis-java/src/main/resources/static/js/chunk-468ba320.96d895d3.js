(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-468ba320"],{"0848":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("Card",[o("Row",{staticClass:"operation"},[o("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加主机群组")]),o("Button",{directives:[{name:"permission",rawName:"v-permission",value:["ROLE_ADMIN","ROLE_TEST"],expression:"['ROLE_ADMIN', 'ROLE_TEST']"}],attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),o("Button",{attrs:{icon:"md-refresh"},on:{click:t.init}},[t._v("刷新")])],1),o("Row",[o("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}})],1),o("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[o("Page",{attrs:{current:t.pageNumber,total:t.total,"page-size":t.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),o("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[o("Form",{ref:"form",attrs:{model:t.form,"label-width":100,rules:t.formValidate}},[o("FormItem",{attrs:{label:"群组名称",prop:"name"}},[o("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("FormItem",{attrs:{label:"类型信息",prop:"type"}},[o("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[o("Option",{attrs:{value:0}},[t._v("oracle")]),o("Option",{attrs:{value:1}},[t._v("mysql")])],1)],1),o("FormItem",{attrs:{label:"业务名称",prop:"name"}},[o("Input",{model:{value:t.form.hostNames,callback:function(e){t.$set(t.form,"hostNames",e)},expression:"form.hostNames"}})],1),o("FormItem",{attrs:{label:"群组描述",prop:"description"}},[o("Input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),o("FormItem",{attrs:{label:"监控状态",prop:"state"}},[o("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},[o("Option",{attrs:{value:"open"}},[t._v("开启")]),o("Option",{attrs:{value:"close"}},[t._v("关闭")])],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),o("Button",{directives:[{name:"permission",rawName:"v-permission",value:["ROLE_ADMIN","ROLE_TEST"],expression:"['ROLE_ADMIN', 'ROLE_TEST']"}],attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)},r=[],a=o("365c"),i=(o("c276"),{name:"host-group-manage",data:function(){var t=this;return{openTip:!1,openLevel:"0",loading:!0,searchKey:"",sortColumn:"createTime",sortType:"desc",modalType:0,modalTitle:"",modalVisible:!1,detailModalTitle:"",detailModalVisible:!1,form:{name:"",description:"",hostNames:"",state:"open"},formValidate:{name:[{required:!0,message:"群组名称不能为空",trigger:"blur"}],type:[{required:!0,message:"类型信息不能为空",type:"number",trigger:"blur"}],hostNames:[{required:!0,message:"业务名称不能为空",type:"number",trigger:"blur"}],state:[{required:!0,message:"状态不能为空",trigger:"blur"}]},submitLoading:!1,selectList:[],selectCount:0,columns:[{type:"selection",width:60,align:"center"},{title:"群组名称",key:"name",sortable:!1},{title:"类型",key:"type",sortable:!1,render:function(t,e){return 0==e.row.type?t("span","oracle"):t("span","mysql")}},{title:"群组描述",key:"description",sortable:!1},{title:"监控状态",key:"state",sortable:!1,render:function(t,e){return t("table-state",{props:{state:e.row.state,content:e.row.state}})}},{title:"操作",key:"action",align:"center",width:300,render:function(e,o){return e("div",[e("Button",{props:{size:"small"},style:{marginRight:"5px"},directives:[{name:"permission",value:["ROLE_ADMIN","ROLE_TEST"]}],on:{click:function(){t.edit(o.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(o.row)}},directives:[{name:"permission",value:["ROLE_ADMIN","ROLE_TEST"]}]},"删除")])}}],data:[],pageNumber:1,pageSize:10,total:0,selectAllFlag:!1,dataType:0,groupList:[]}},methods:{init:function(){this.getHostGroupList()},changePage:function(t){this.pageNumber=t,this.getHostGroupList(),this.clearSelectAll()},changePageSize:function(t){this.pageSize=t,this.getHostGroupList()},changeSort:function(t){this.sortColumn=t.key,this.sortType=t.order,"normal"==t.order&&(this.sortType=""),this.getHostGroupList()},getHostGroupList:function(){var t=this;this.loading=!0;var e={pageNumber:this.pageNumber,pageSize:this.pageSize,sort:this.sortColumn,order:this.sort};Object(a["tb"])(e).then((function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)}))},cancel:function(){this.modalVisible=!1},submit:function(){var t=this;this.$refs.form.validate((function(e){e&&(0==t.modalType?(t.submitLoading=!0,Object(a["e"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getHostGroupList(),t.modalVisible=!1)}))):(t.submitLoading=!0,Object(a["L"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getHostGroupList(),t.modalVisible=!1)}))))}))},add:function(){this.modalType=0,this.modalTitle="添加群组信息",this.$refs.form.resetFields(),this.form={type:0,state:"open"},this.modalVisible=!0},edit:function(t){for(var e in this.modalType=1,this.modalTitle="编辑群组信息",this.$refs.form.resetFields(),t)null==t[e]&&(t[e]="");var o=JSON.stringify(t),s=JSON.parse(o);this.form=s,this.modalVisible=!0},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除群组 "+t.name+" ?",loading:!0,onOk:function(){Object(a["w"])(t.id).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("删除成功"),e.getHostGroupList())}))}})},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSelect:function(t){this.selectList=t,this.selectCount=t.length},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(a["w"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.clearSelectAll(),t.getHostGroupList())}))}})}},mounted:function(){this.init()}}),n=i,l=(o("263a"),o("2877")),c=Object(l["a"])(n,s,r,!1,null,"4e5315be",null);e["default"]=c.exports},"263a":function(t,e,o){"use strict";var s=o("3d72"),r=o.n(s);r.a},"3a08":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("Card",[o("Row",{staticClass:"operation"},[o("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addMenu}},[t._v("添加子节点")]),o("Button",{attrs:{icon:"md-add"},on:{click:t.addRootMenu}},[t._v("添加顶部菜单")]),o("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),o("Dropdown",{on:{"on-click":t.handleDropdown}},[o("Button",[t._v(" 更多操作 "),o("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),o("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[o("DropdownItem",{attrs:{name:"refresh"}},[t._v("刷新")]),o("DropdownItem",{attrs:{name:"expandOne"}},[t._v("收合所有")]),o("DropdownItem",{attrs:{name:"expandTwo"}},[t._v("仅展开一级")]),o("DropdownItem",{attrs:{name:"expandThree"}},[t._v("仅展开两级")]),o("DropdownItem",{attrs:{name:"expandAll"}},[t._v("展开所有")])],1)],1),o("i-switch",{staticStyle:{"margin-left":"5px"},attrs:{size:"large"},model:{value:t.strict,callback:function(e){t.strict=e},expression:"strict"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("级联")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("单选")])])],1),o("Row",{attrs:{type:"flex",justify:"start"}},[o("Col",{attrs:{md:8,lg:8,xl:6}},[o("Alert",{attrs:{"show-icon":""}},[t._v(" 当前选择编辑： "),o("span",{staticClass:"select-title"},[t._v(t._s(t.editTitle))]),t.form.id?o("a",{staticClass:"select-clear",on:{click:t.cancelEdit}},[t._v("取消选择")]):t._e()]),o("Input",{attrs:{suffix:"ios-search",placeholder:"输入菜单名搜索",clearable:""},on:{"on-change":t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),o("div",{staticClass:"tree-bar",style:{maxHeight:t.maxHeight}},[o("Tree",{ref:"tree",attrs:{data:t.data,"show-checkbox":"",render:t.renderContent,"check-strictly":!t.strict},on:{"on-check-change":t.changeSelect}}),t.loading?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1),o("Col",{staticStyle:{"margin-left":"10px"},attrs:{md:15,lg:13,xl:9}},[o("Form",{ref:"form",attrs:{model:t.form,"label-width":110,rules:t.formValidate}},[o("FormItem",{attrs:{label:"类型",prop:"type"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.form.type,expression:"form.type==-1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-navigate-outline",size:"16"}}),o("span",[t._v("顶部菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.form.type,expression:"form.type==0"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-list-box-outline",size:"16"}}),o("span",[t._v("页面菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.form.type,expression:"form.type==1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-radio-button-on",size:"16"}}),o("span",[t._v("操作按钮")])],1)]),-1==t.form.type||0==t.form.type?o("FormItem",{attrs:{label:"名称",prop:"title"}},[o("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1):t._e(),1==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"名称",prop:"title"}},[o("Tooltip",{attrs:{placement:"right",content:"操作按钮名称不得重复"}},[o("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1):t._e(),0==t.form.type?o("FormItem",{attrs:{label:"路径",prop:"path"}},[o("Input",{model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1):t._e(),1==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"请求路径",prop:"path"}},[o("Tooltip",{attrs:{placement:"right","max-width":230,transfer:"",content:"填写后台请求URL，后台将作权限拦截，若无可填写'无'或其他"}},[o("Input",{model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1)],1):t._e(),1==t.form.type?o("FormItem",{attrs:{label:"按钮权限类型",prop:"buttonType"}},[o("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:""},model:{value:t.form.buttonType,callback:function(e){t.$set(t.form,"buttonType",e)},expression:"form.buttonType"}},t._l(t.dictPermissions,(function(e,s){return o("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1):t._e(),-1==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一"}},[o("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1):t._e(),0==t.form.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"路由英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一",transfer:""}},[o("Input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1):t._e(),-1==t.form.type||0==t.form.type?o("FormItem",{attrs:{label:"图标",prop:"icon"}},[o("icon-choose",{model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}})],1):t._e(),0==t.form.type?o("FormItem",{attrs:{label:"前端组件",prop:"component"}},[o("Input",{model:{value:t.form.component,callback:function(e){t.$set(t.form,"component",e)},expression:"form.component"}})],1):t._e(),0==t.form.type&&2==t.form.level?o("FormItem",{staticClass:"block-tool",attrs:{label:"第三方链接",prop:"url"}},[o("Tooltip",{attrs:{placement:"right",content:"前端组件需为 sys/monitor/monitor 时生效","max-width":"300",transfer:""}},[o("Input",{attrs:{placeholder:"http://"},on:{"on-change":t.changeEditUrl},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1)],1):t._e(),o("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[o("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[o("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.form.sortOrder,callback:function(e){t.$set(t.form,"sortOrder",e)},expression:"form.sortOrder"}})],1)],1),1==t.form.level?o("FormItem",{staticClass:"block-tool",attrs:{label:"始终显示",prop:"showAlways"}},[o("i-switch",{attrs:{size:"large"},model:{value:t.form.showAlways,callback:function(e){t.$set(t.form,"showAlways",e)},expression:"form.showAlways"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])]),o("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"当设为不始终显示时，一级菜单下仅有一个子级菜单只会显示该子级菜单，避免用户多次点击",placement:"right",transfer:"","max-width":"280"}},[o("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1):t._e(),o("FormItem",{attrs:{label:"是否启用",prop:"status"}},[o("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1),o("Form-item",[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{loading:t.submitLoading,type:"primary",icon:"ios-create-outline"},on:{click:t.submitEdit}},[t._v("修改并保存")]),o("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1)],1)],1),o("Modal",{attrs:{draggable:"",title:t.modalTitle,"mask-closable":!1,width:500,styles:{top:"30px"}},model:{value:t.menuModalVisible,callback:function(e){t.menuModalVisible=e},expression:"menuModalVisible"}},[o("Form",{ref:"formAdd",attrs:{model:t.formAdd,"label-width":100,rules:t.formValidate}},[t.showParent?o("div",[o("FormItem",{attrs:{label:"上级节点："}},[t._v(t._s(t.parentTitle))])],1):t._e(),o("FormItem",{attrs:{label:"类型",prop:"type"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.formAdd.type,expression:"formAdd.type==-1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-navigate-outline",size:"16"}}),o("span",[t._v("顶部菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.formAdd.type,expression:"formAdd.type==0"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"ios-list-box-outline",size:"16"}}),o("span",[t._v("页面菜单")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.formAdd.type,expression:"formAdd.type==1"}]},[o("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-radio-button-on",size:"16"}}),o("span",[t._v("操作按钮")])],1)]),-1==t.formAdd.type||0==t.formAdd.type?o("FormItem",{attrs:{label:"名称",prop:"title"}},[o("Input",{model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1):t._e(),1==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"名称",prop:"title"}},[o("Tooltip",{attrs:{placement:"right",content:"操作按钮名称不得重复"}},[o("Input",{model:{value:t.formAdd.title,callback:function(e){t.$set(t.formAdd,"title",e)},expression:"formAdd.title"}})],1)],1):t._e(),0==t.formAdd.type?o("FormItem",{attrs:{label:"路径",prop:"path"}},[o("Input",{model:{value:t.formAdd.path,callback:function(e){t.$set(t.formAdd,"path",e)},expression:"formAdd.path"}})],1):t._e(),1==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"请求路径",prop:"path"}},[o("Tooltip",{attrs:{placement:"right","max-width":230,transfer:"",content:"填写后台请求URL，后台将作权限拦截，若无可填写'无'或其他"}},[o("Input",{model:{value:t.formAdd.path,callback:function(e){t.$set(t.formAdd,"path",e)},expression:"formAdd.path"}})],1)],1):t._e(),1==t.formAdd.type?o("FormItem",{attrs:{label:"按钮权限类型",prop:"buttonType"}},[o("Select",{attrs:{placeholder:"请选择或输入搜索",filterable:"",clearable:""},model:{value:t.formAdd.buttonType,callback:function(e){t.$set(t.formAdd,"buttonType",e)},expression:"formAdd.buttonType"}},t._l(t.dictPermissions,(function(e,s){return o("Option",{key:s,attrs:{value:e.value}},[t._v(t._s(e.title))])})),1)],1):t._e(),-1==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一"}},[o("Input",{model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}})],1)],1):t._e(),0==t.formAdd.type?o("FormItem",{staticClass:"block-tool",attrs:{label:"路由英文名",prop:"name"}},[o("Tooltip",{attrs:{placement:"right",content:"需唯一"}},[o("Input",{model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}})],1)],1):t._e(),-1==t.formAdd.type||0==t.formAdd.type?o("FormItem",{attrs:{label:"图标",prop:"icon"}},[o("icon-choose",{model:{value:t.formAdd.icon,callback:function(e){t.$set(t.formAdd,"icon",e)},expression:"formAdd.icon"}})],1):t._e(),0==t.formAdd.type?o("FormItem",{attrs:{label:"前端组件",prop:"component"}},[o("Input",{model:{value:t.formAdd.component,callback:function(e){t.$set(t.formAdd,"component",e)},expression:"formAdd.component"}})],1):t._e(),0==t.formAdd.type&&2==t.formAdd.level?o("FormItem",{staticClass:"block-tool",attrs:{label:"第三方链接",prop:"url"}},[o("Tooltip",{attrs:{placement:"right",content:"前端组件需为 sys/monitor/monitor 时生效","max-width":"300",transfer:""}},[o("Input",{attrs:{placeholder:"http://"},on:{"on-change":t.changeAddUrl},model:{value:t.formAdd.url,callback:function(e){t.$set(t.formAdd,"url",e)},expression:"formAdd.url"}})],1)],1):t._e(),o("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[o("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[o("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.formAdd.sortOrder,callback:function(e){t.$set(t.formAdd,"sortOrder",e)},expression:"formAdd.sortOrder"}})],1)],1),1==t.formAdd.level?o("FormItem",{staticClass:"block-tool",attrs:{label:"始终显示",prop:"showAlways"}},[o("i-switch",{attrs:{size:"large"},model:{value:t.formAdd.showAlways,callback:function(e){t.$set(t.formAdd,"showAlways",e)},expression:"formAdd.showAlways"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("是")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("否")])]),o("Tooltip",{staticStyle:{display:"inline-block !important"},attrs:{content:"当设为不始终显示时，一级菜单下仅有一个子级菜单只会显示该子级菜单，避免用户多次点击",placement:"right",transfer:"","max-width":"280"}},[o("Icon",{staticStyle:{"margin-left":"10px",cursor:"pointer"},attrs:{type:"md-help-circle",size:"20",color:"#c5c5c5"}})],1)],1):t._e(),o("FormItem",{attrs:{label:"是否启用",prop:"status"}},[o("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.formAdd.status,callback:function(e){t.$set(t.formAdd,"status",e)},expression:"formAdd.status"}},[o("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),o("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"text"},on:{click:function(e){t.menuModalVisible=!1}}},[t._v("取消")]),o("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitAdd}},[t._v("提交")])],1)],1)],1)},r=[],a=o("365c"),i=o("ad40"),n=o("c276"),l={name:"menu-manage",components:{IconChoose:i["default"]},data:function(){return{loading:!0,strict:!0,maxHeight:"500px",expandLevel:1,menuModalVisible:!1,iconModalVisible:!1,selectList:[],selectCount:0,showParent:!1,searchKey:"",parentTitle:"",editTitle:"",modalTitle:"",form:{id:"",title:"",name:"",icon:"",path:"",component:"",parentId:"",buttonType:"",type:0,sortOrder:0,level:0,status:0,url:"",showAlways:!0},formAdd:{buttonType:""},formValidate:{title:[{required:!0,message:"名称不能为空",trigger:"blur"}],name:[{required:!0,message:"路由英文名不能为空",trigger:"blur"}],icon:[{required:!0,message:"图标不能为空",trigger:"click"}],path:[{required:!0,message:"路径不能为空",trigger:"blur"}],component:[{required:!0,message:"前端组件不能为空",trigger:"blur"}],sortOrder:[{required:!0,type:"number",message:"排序值不能为空",trigger:"blur"}]},submitLoading:!1,data:[],dictPermissions:[]}},methods:{init:function(){this.getAllList(),this.getDictPermissions()},getDictPermissions:function(){var t=this;Object(a["nb"])("permission_type").then((function(e){e.success&&(t.dictPermissions=e.result)}))},renderContent:function(t,e){var o=this,s=(e.root,e.node,e.data),r="";return r=0==s.level?"ios-navigate":1==s.level?"md-list-box":2==s.level?"md-list":3==s.level?"md-radio-button-on":"md-radio-button-off",t("span",{style:{display:"inline-block",cursor:"pointer"},on:{click:function(){o.selectTree(s)}}},[t("span",[t("Icon",{props:{type:r,size:"16"},style:{"margin-right":"8px","margin-bottom":"3px"}}),t("span",{class:{"ivu-tree-title":!0,"ivu-tree-title-selected":s.id==this.form.id}},s.title)])])},handleDropdown:function(t){"expandOne"==t?(this.expandLevel=1,this.getAllList()):"expandTwo"==t?(this.expandLevel=2,this.getAllList()):"expandThree"==t&&(this.expandLevel=3,this.getAllList()),"expandAll"==t?(this.expandLevel=4,this.getAllList()):"refresh"==t&&this.getAllList()},getAllList:function(){var t=this;this.loading=!0,this.getRequest("/permission/getAllList").then((function(e){if(t.loading=!1,e.success){var o=t.expandLevel;e.result.forEach((function(t){1==o?(0==t.level&&(t.expand=!1),t.children&&t.children.length>0&&t.children.forEach((function(t){1==t.level&&(t.expand=!1),t.children&&t.children.length>0&&t.children.forEach((function(t){2==t.level&&(t.expand=!1)}))}))):2==o?(0==t.level&&(t.expand=!0),t.children&&t.children.length>0&&t.children.forEach((function(t){1==t.level&&(t.expand=!1),t.children&&t.children.length>0&&t.children.forEach((function(t){2==t.level&&(t.expand=!1)}))}))):3==o&&(0==t.level&&(t.expand=!0),t.children&&t.children.length>0&&t.children.forEach((function(t){1==t.level&&(t.expand=!0),t.children&&t.children.length>0&&t.children.forEach((function(t){2==t.level&&(t.expand=!1)}))})))})),t.data=e.result}}))},search:function(){var t=this;this.searchKey?(this.loading=!0,Object(a["Cc"])({title:this.searchKey}).then((function(e){t.loading=!1,e.success&&(t.data=e.result)}))):this.getAllList()},selectTree:function(t){if(t&&t.id!=this.form.id){for(var e in t)null==t[e]&&(t[e]="");var o=JSON.stringify(t),s=JSON.parse(o);this.form=s,this.editTitle=s.title}else this.cancelEdit()},cancelEdit:function(){var t=this.$refs.tree.getSelectedNodes()[0];t&&(t.selected=!1),this.$refs.form.resetFields(),this.form.id="",this.editTitle=""},handleReset:function(){var t=this.form.type;this.$refs.form.resetFields(),this.form.icon="",this.form.component="",this.form.type=t},submitEdit:function(){var t=this;this.$refs.form.validate((function(e){if(e){if(!t.form.id)return void t.$Message.warning("请先点击选择要修改的菜单节点");t.submitLoading=!0,null==t.form.sortOrder&&(t.form.sortOrder=""),null==t.form.buttonType&&(t.form.buttonType=""),1==t.form.type&&(t.form.name="",t.form.icon="",t.form.component=""),delete t.form.children,Object(a["M"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("编辑成功"),t.$store.commit("setAdded",!1),n["a"].initRouter(t),t.init(),t.menuModalVisible=!1)}))}}))},submitAdd:function(){var t=this;this.$refs.formAdd.validate((function(e){e&&(t.submitLoading=!0,1==t.formAdd.type&&(t.formAdd.name="",t.formAdd.icon="",t.formAdd.component=""),Object(a["f"])(t.formAdd).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("添加成功"),t.$store.commit("setAdded",!1),n["a"].initRouter(t),t.init(),t.menuModalVisible=!1)})))}))},changeEditUrl:function(t){var e=t.target.value;e.indexOf("http")>-1&&(this.form.component="sys/monitor/monitor")},changeAddUrl:function(t){var e=t.target.value;e.indexOf("http")>-1&&(this.formAdd.component="sys/monitor/monitor")},addMenu:function(){if(this.form.id){this.parentTitle=this.form.title,this.modalTitle="添加子节点(可拖动)",this.showParent=!0;var t=0;if(1==this.form.level)t=0;else if(2==this.form.level)t=1;else{if(3==this.form.level)return void this.$Modal.warning({title:"抱歉，不能添加啦",content:"仅支持2级菜单目录"});t=0}this.formAdd={icon:"",type:t,parentId:this.form.id,level:Number(this.form.level)+1,sortOrder:0,buttonType:"",status:0,showAlways:!0},0==this.form.level&&(this.formAdd.path="/",this.formAdd.component="Main"),this.menuModalVisible=!0}else this.$Message.warning("请先点击选择一个菜单权限节点")},addRootMenu:function(){this.modalTitle="添加顶部菜单(可拖动)",this.showParent=!1,this.formAdd={type:-1,level:0,sortOrder:0,status:0},this.menuModalVisible=!0},changeSelect:function(t){this.selectCount=t.length,this.selectList=t},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未勾选要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(a["y"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.$store.commit("setAdded",!1),n["a"].initRouter(t),t.selectList=[],t.selectCount=0,t.cancelEdit(),t.init())}))}})}},mounted:function(){var t=document.documentElement.clientHeight;this.maxHeight=Number(t-287)+"px",this.init()}},c=l,m=(o("d5b3"),o("2877")),d=Object(m["a"])(c,s,r,!1,null,null,null);e["default"]=d.exports},"3d72":function(t,e,o){},"44c5":function(t,e,o){},af40:function(t,e,o){"use strict";var s=o("44c5"),r=o.n(s);r.a},c0a9:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search"},[o("Card",[o("Tabs",{attrs:{animated:!1},on:{"on-click":t.changeTab}},[o("TabPane",{attrs:{label:"登陆日志",name:"1"}}),o("TabPane",{attrs:{label:"操作日志",name:"0"}})],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:t.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}}},[o("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:"","label-width":70}},[o("Form-item",{attrs:{label:"搜索日志"}},[o("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入搜索关键词"},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),o("Form-item",{attrs:{label:"创建时间"}},[o("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange",format:"yyyy-MM-dd",clearable:"",placeholder:"选择起始时间"},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),o("Form-item",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[o("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")]),o("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),o("Row",{staticClass:"operation"},[o("Button",{attrs:{type:"error",icon:"md-trash"},on:{click:t.clearAll}},[t._v("清空全部")]),o("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),o("Button",{attrs:{icon:"md-refresh"},on:{click:t.getLogList}},[t._v("刷新")]),o("Button",{attrs:{type:"dashed"},on:{click:function(e){t.openSearch=!t.openSearch}}},[t._v(t._s(t.openSearch?"关闭搜索":"开启搜索"))]),o("Button",{attrs:{type:"dashed"},on:{click:function(e){t.openTip=!t.openTip}}},[t._v(t._s(t.openTip?"关闭提示":"开启提示"))])],1),o("Row",{directives:[{name:"show",rawName:"v-show",value:t.openTip,expression:"openTip"}]},[o("Alert",[t._v(" 已选择 "),o("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" 项 "),o("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])])],1),o("Row",[o("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}})],1),o("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[o("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)},r=[],a=o("365c"),i={name:"log-manage",data:function(){var t=this;return{openSearch:!0,openTip:!0,loading:!0,selectList:[],selectCount:0,selectDate:null,searchKey:"",searchForm:{type:1,pageNumber:1,pageSize:10,startDate:"",endDate:"",sort:"createTime",order:"desc"},columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center",fixed:"left"},{title:"操作名称",key:"name",width:115,sortable:!0,fixed:"left"},{title:"请求类型",key:"requestType",width:130,align:"center",sortable:!0,filters:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"}],filterMultiple:!1,filterMethod:function(t,e){return"GET"==t?"GET"==e.requestType:"POST"==t?"POST"==e.requestType:"PUT"==t?"PUT"==e.requestType:"DELETE"==t?"DELETE"==e.requestType:void 0}},{title:"请求路径",width:150,key:"requestUrl"},{title:"请求参数",minWidth:200,key:"requestParam",tooltip:!0},{title:"登录用户",key:"username",minWidth:120,sortable:!0},{title:"IP",key:"ip",width:150,sortable:!0},{title:"IP信息",key:"ipInfo",width:190,sortable:!0},{title:"耗时(毫秒)",key:"costTime",width:140,sortable:!0,align:"center",filters:[{label:"≤1000毫秒",value:0},{label:">1000毫秒",value:1}],filterMultiple:!1,filterMethod:function(t,e){return 0==t?e.costTime<=1e3:1==t?e.costTime>1e3:void 0}},{title:"日志类型",key:"logType",align:"center",width:110,render:function(t,e){return 0==e.row.logType?t("div",[t("Tag",{props:{color:"blue"}},"操作日志")]):1==e.row.logType?t("div",[t("Tag",{props:{color:"green"}},"登陆日志")]):void 0}},{title:"创建时间",key:"createTime",sortable:!0,width:170,sortType:"desc"},{title:"操作",key:"action",width:98,align:"center",fixed:"right",render:function(e,o){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(o.row)}}},"删除")])}}],data:[],total:0}},methods:{init:function(){this.getLogList()},changeTab:function(t){this.searchForm.type=t,this.getLogList()},changePage:function(t){this.searchForm.pageNumber=t,this.getLogList(),this.clearSelectAll()},changePageSize:function(t){this.searchForm.pageSize=t,this.getLogList()},selectDateRange:function(t){t&&(this.searchForm.startDate=t[0],this.searchForm.endDate=t[1])},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getLogList()},getLogList:function(){var t=this;this.loading=!0,this.searchForm.key=this.searchKey,Object(a["Ab"])(this.searchForm).then((function(e){t.loading=!1,e.success&&(t.data=e.result.content,t.total=e.result.totalElements)}))},handleReset:function(){this.searchKey="",this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.getLogList()},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除该条数据?",loading:!0,onOk:function(){Object(a["x"])(t.id).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("删除成功"),e.init())}))}})},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSelect:function(t){this.selectList=t,this.selectCount=t.length},changeSort:function(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"==t.order&&(this.searchForm.order=""),this.getLogList()},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(a["x"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.clearSelectAll(),t.init())}))}})},clearAll:function(){var t=this;this.$Modal.confirm({title:"请谨慎进行此操作！",content:"您确认要彻底清空删除所有数据?",onOk:function(){t.loading=!0;var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(a["q"])().then((function(e){t.loading=!1,e.success&&(t.$Message.success("清空日志成功"),t.clearSelectAll(),t.init())}))}})}},mounted:function(){this.init()}},n=i,l=(o("af40"),o("2877")),c=Object(l["a"])(n,s,r,!1,null,null,null);e["default"]=c.exports},d5b3:function(t,e,o){"use strict";var s=o("d5ea"),r=o.n(s);r.a},d5ea:function(t,e,o){}}]);