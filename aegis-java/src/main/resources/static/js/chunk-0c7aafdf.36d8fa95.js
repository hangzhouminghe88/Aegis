(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c7aafdf"],{"069f":function(t,e,i){},"1e8a":function(t,e,i){"use strict";var s=i("069f"),a=i.n(s);a.a},2798:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("Card",[i("Row",{staticClass:"operation"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addRole}},[t._v("添加角色")]),i("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),i("Button",{attrs:{icon:"md-refresh"},on:{click:t.init}},[t._v("刷新")]),i("Button",{attrs:{type:"dashed"},on:{click:function(e){t.openTip=!t.openTip}}},[t._v(t._s(t.openTip?"关闭提示":"开启提示"))])],1),i("Row",{directives:[{name:"show",rawName:"v-show",value:t.openTip,expression:"openTip"}]},[i("Alert",{attrs:{"show-icon":""}},[t._v(" 已选择 "),i("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" 项 "),i("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])])],1),i("Row",[i("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.changeSelect}})],1),i("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{current:t.pageNumber,total:t.total,"page-size":t.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),i("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.roleModalVisible,callback:function(e){t.roleModalVisible=e},expression:"roleModalVisible"}},[i("Form",{ref:"roleForm",attrs:{model:t.roleForm,"label-width":80,rules:t.roleFormValidate}},[i("FormItem",{attrs:{label:"角色名称",prop:"name"}},[i("Input",{attrs:{placeholder:"按照Spring Security约定建议以‘ROLE_’开头"},model:{value:t.roleForm.name,callback:function(e){t.$set(t.roleForm,"name",e)},expression:"roleForm.name"}})],1),i("FormItem",{attrs:{label:"备注",prop:"description"}},[i("Input",{model:{value:t.roleForm.description,callback:function(e){t.$set(t.roleForm,"description",e)},expression:"roleForm.description"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelRole}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitRole}},[t._v("提交")])],1)],1),i("Modal",{staticClass:"permModal",attrs:{title:t.modalTitle,"mask-closable":!1,width:500,styles:{top:"30px"}},model:{value:t.permModalVisible,callback:function(e){t.permModalVisible=e},expression:"permModalVisible"}},[i("div",{staticStyle:{position:"relative"}},[i("Tree",{ref:"tree",attrs:{data:t.permData,"show-checkbox":"",render:t.renderContent,"check-strictly":!0}}),t.treeLoading?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:t.cancelPermEdit}},[t._v("取消")]),i("Select",{staticStyle:{width:"110px","text-align":"left","margin-right":"10px"},on:{"on-change":t.changeOpen},model:{value:t.openLevel,callback:function(e){t.openLevel=e},expression:"openLevel"}},[i("Option",{attrs:{value:"0"}},[t._v("展开所有")]),i("Option",{attrs:{value:"1"}},[t._v("收合所有")]),i("Option",{attrs:{value:"2"}},[t._v("仅展开一级")]),i("Option",{attrs:{value:"3"}},[t._v("仅展开两级")])],1),i("Button",{on:{click:t.selectTreeAll}},[t._v("全选/反选")]),i("Button",{attrs:{type:"primary",loading:t.submitPermLoading},on:{click:t.submitPermEdit}},[t._v("提交")])],1)]),i("Modal",{staticClass:"depModal",attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.depModalVisible,callback:function(e){t.depModalVisible=e},expression:"depModalVisible"}},[i("Alert",{attrs:{"show-icon":""}},[t._v("默认可查看全部数据，自定义数据范围时请勾选下方数据")]),i("Form",{attrs:{"label-width":85}},[i("FormItem",{attrs:{label:"数据范围"}},[i("Select",{attrs:{transfer:""},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}},[i("Option",{attrs:{value:0}},[t._v("全部数据权限")]),i("Option",{attrs:{value:1}},[t._v("自定义数据权限")]),i("Option",{attrs:{value:2}},[t._v("本部门及以下数据权限")]),i("Option",{attrs:{value:3}},[t._v("本部门数据权限")])],1)],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.dataType,expression:"dataType==1"}],staticStyle:{"margin-top":"15px"}},[i("div",{staticStyle:{position:"relative"}},[i("Tree",{ref:"depTree",staticStyle:{"margin-top":"15px"},attrs:{data:t.depData,"load-data":t.loadData,multiple:""},on:{"on-toggle-expand":t.expandCheckDep}}),t.depTreeLoading?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:function(e){t.depModalVisible=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.submitDepLoading},on:{click:t.submitDepEdit}},[t._v("提交")])],1)],1)],1)},a=[],o=i("365c"),l=i("c276"),n={name:"role-manage",data:function(){var t=this;return{openTip:!0,openLevel:"0",loading:!0,treeLoading:!0,depTreeLoading:!0,submitPermLoading:!1,submitDepLoading:!1,searchKey:"",sortColumn:"createTime",sortType:"desc",modalType:0,roleModalVisible:!1,permModalVisible:!1,depModalVisible:!1,modalTitle:"",roleForm:{name:"",description:""},roleFormValidate:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},submitLoading:!1,selectList:[],selectCount:0,columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"角色名称",key:"name",width:150,sortable:!0},{title:"备注",key:"description",minWidth:150,sortable:!0},{title:"创建时间",key:"createTime",width:170,sortable:!0,sortType:"desc"},{title:"更新时间",key:"updateTime",width:170,sortable:!0},{title:"是否设置为注册用户默认角色",key:"defaultRole",align:"center",width:220,render:function(e,i){return i.row.defaultRole?e("div",[e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.cancelDefault(i.row)}}},"取消默认")]):e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.setDefault(i.row)}}},"设为默认")])}},{title:"操作",key:"action",align:"center",fixed:"right",width:300,render:function(e,i){return e("div",[e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.editPerm(i.row)}}},"菜单权限"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.editDep(i.row)}}},"数据权限"),e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.edit(i.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(i.row)}}},"删除")])}}],data:[],pageNumber:1,pageSize:10,total:0,permData:[],editRolePermId:"",selectAllFlag:!1,depData:[],dataType:0,editDepartments:[]}},methods:{init:function(){this.getRoleList(),this.getPermList()},renderContent:function(t,e){e.root,e.node;var i=e.data,s="";return s=0==i.level?"ios-navigate":1==i.level?"md-list-box":2==i.level?"md-list":3==i.level?"md-radio-button-on":"md-radio-button-off",t("span",{style:{display:"inline-block",cursor:"pointer"},on:{click:function(){i.checked=!i.checked}}},[t("span",[t("Icon",{props:{type:s,size:"16"},style:{"margin-right":"8px","margin-bottom":"3px"}}),t("span",{class:"ivu-tree-title"},i.title)])])},changePage:function(t){this.pageNumber=t,this.getRoleList(),this.clearSelectAll()},changePageSize:function(t){this.pageSize=t,this.getRoleList()},changeSort:function(t){this.sortColumn=t.key,this.sortType=t.order,"normal"==t.order&&(this.sortType=""),this.getRoleList()},getRoleList:function(){var t=this;this.loading=!0;var e={pageNumber:this.pageNumber,pageSize:this.pageSize,sort:this.sortColumn,order:this.sort};Object(o["Jb"])(e).then((function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)}))},getPermList:function(){var t=this;this.treeLoading=!0,Object(o["eb"])().then((function(e){e.success&&(t.deleteDisableNode(e.result),t.permData=e.result,t.treeLoading=!1),t.treeLoading=!1}))},deleteDisableNode:function(t){var e=this;t.forEach((function(t){-1==t.status&&(t.title="[已禁用] "+t.title,t.disabled=!0),t.children&&t.children.length>0&&e.deleteDisableNode(t.children)}))},cancelRole:function(){this.roleModalVisible=!1},submitRole:function(){var t=this;this.$refs.roleForm.validate((function(e){e&&(0==t.modalType?(t.submitLoading=!0,Object(o["h"])(t.roleForm).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getRoleList(),t.roleModalVisible=!1)}))):(t.submitLoading=!0,Object(o["O"])(t.roleForm).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getRoleList(),t.roleModalVisible=!1)}))))}))},addRole:function(){this.modalType=0,this.modalTitle="添加角色",this.$refs.roleForm.resetFields(),delete this.roleForm.id,this.roleModalVisible=!0},edit:function(t){for(var e in this.modalType=1,this.modalTitle="编辑角色",this.$refs.roleForm.resetFields(),t)null==t[e]&&(t[e]="");var i=JSON.stringify(t),s=JSON.parse(i);this.roleForm=s,delete this.roleForm.permissions,this.roleModalVisible=!0},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除角色 "+t.name+" ?",loading:!0,onOk:function(){Object(o["B"])(t.id).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("删除成功"),e.getRoleList())}))}})},setDefault:function(t){var e=this;this.$Modal.confirm({title:"确认设置",content:"您确认要设置所选的 "+t.name+" 为注册用户默认角色?",loading:!0,onOk:function(){var i={id:t.id,isDefault:!0};Object(o["Ec"])(i).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getRoleList())}))}})},cancelDefault:function(t){var e=this;this.$Modal.confirm({title:"确认取消",content:"您确认要取消所选的 "+t.name+" 角色为默认?",loading:!0,onOk:function(){var i={id:t.id,isDefault:!1};Object(o["Ec"])(i).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getRoleList())}))}})},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSelect:function(t){this.selectList=t,this.selectCount=t.length},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(o["B"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.clearSelectAll(),t.getRoleList())}))}})},editPerm:function(t){this.editRolePermId=t.id,this.modalTitle="分配 "+t.name+" 的菜单权限";var e=t.permissions;this.treeLoading?this.$Message.warning("菜单权限数据加载中，请稍后点击查看"):(this.checkPermTree(this.permData,e),this.permModalVisible=!0)},checkPermTree:function(t,e){var i=this;t.forEach((function(t){i.hasPerm(t,e)&&-1!=t.status?t.checked=!0:t.checked=!1,t.children&&t.children.length>0&&i.checkPermTree(t.children,e)}))},hasPerm:function(t,e){for(var i=!1,s=0;s<e.length;s++)if(t.id==e[s].permissionId){i=!0;break}return!!i},selectTreeAll:function(){this.selectAllFlag=!this.selectAllFlag;var t=this.selectAllFlag;this.selectedTreeAll(this.permData,t)},selectedTreeAll:function(t,e){var i=this;t.forEach((function(t){t.checked=e,t.children&&t.children.length>0&&i.selectedTreeAll(t.children,e)}))},submitPermEdit:function(){var t=this;this.submitPermLoading=!0;var e="",i=this.$refs.tree.getCheckedNodes();i.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(o["Q"])({roleId:this.editRolePermId,permIds:e}).then((function(e){t.submitPermLoading=!1,e.success&&(t.$Message.success("操作成功"),t.$store.commit("setAdded",!1),l["a"].initRouter(t),t.getRoleList(),t.permModalVisible=!1)}))},cancelPermEdit:function(){this.permModalVisible=!1},loadData:function(t,e){Object(o["sc"])(t.id,{openDataFilter:!1}).then((function(t){t.success&&(t.result.forEach((function(t){t.selected=!1,t.isParent&&(t.loading=!1,t.children=[]),-1==t.status&&(t.title="[已禁用] "+t.title,t.disabled=!0)})),e(t.result))}))},editDep:function(t){var e=this;this.dataType=0,this.editRolePermId=t.id,this.modalTitle="分配 "+t.name+" 的数据权限",t.dataType&&(this.dataType=t.dataType);var i=t.departments;this.editDepartments=i,this.depTreeLoading=!0,Object(o["qc"])({openDataFilter:!1}).then((function(t){e.depTreeLoading=!1,t.success&&(t.result.forEach((function(t){t.selected=!1,t.isParent&&(t.loading=!1,t.children=[]),-1==t.status&&(t.title="[已禁用] "+t.title,t.disabled=!0)})),e.depData=t.result,e.checkDepTree(e.depData,i))})),this.depModalVisible=!0},expandCheckDep:function(t){this.checkDepTree(t.children,this.editDepartments)},checkDepTree:function(t,e){var i=this;t.forEach((function(t){i.hasDepPerm(t,e)?t.selected=!0:t.selected=!1}))},hasDepPerm:function(t,e){for(var i=!1,s=0;s<e.length;s++)if(t.id==e[s].departmentId){i=!0;break}return!!i},submitDepEdit:function(){var t=this,e="";if(1==this.dataType){var i=this.$refs.depTree.getSelectedNodes();i.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1)}this.submitDepLoading=!0,Object(o["P"])({roleId:this.editRolePermId,dataType:this.dataType,depIds:e}).then((function(e){t.submitDepLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getRoleList(),t.depModalVisible=!1)}))},changeOpen:function(t){"0"==t?this.permData.forEach((function(t){t.expand=!0,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!0,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!0}))}))})):"1"==t?this.permData.forEach((function(t){t.expand=!1,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!1,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!1}))}))})):"2"==t?this.permData.forEach((function(t){t.expand=!0,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!1,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!1}))}))})):"3"==t&&this.permData.forEach((function(t){t.expand=!0,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!0,t.children&&t.children.length>0&&t.children.forEach((function(t){t.expand=!1}))}))}))}},mounted:function(){this.init()}},c=n,r=(i("4261"),i("2877")),d=Object(r["a"])(c,s,a,!1,null,null,null);e["default"]=d.exports},4261:function(t,e,i){"use strict";var s=i("b53e"),a=i.n(s);a.a},"553b":function(t,e){t.exports="data:image/svg+xml;base64,DQo8c3ZnIHdpZHRoPSIxNHB4IiBoZWlnaHQ9IjE2cHgiIHZpZXdCb3g9IjAgMCAxNCAxNiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ0ICg0MTQxMSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGRlZnM+PC9kZWZzPg0KICAgIDxnIGlkPSLpppbpobUmYW1wO+eZu+W9lSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSLlhbPkuo4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC03MjUuMDAwMDAwLCAtNjYzLjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTE5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MjQuMDAwMDAwLCA2NjMuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS02IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAwLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMy41LDEgQzMuMjIzODU3NjMsMSAzLDEuMjIzODU3NjMgMywxLjUgTDMsMTIuNSBDMywxMi43NzYxNDI0IDMuMjIzODU3NjMsMTMgMy41LDEzIEwxMi41LDEzIEMxMi43NzYxNDI0LDEzIDEzLDEyLjc3NjE0MjQgMTMsMTIuNSBMMTMsNS4wMDMyMjYyOCBDMTMsNC44NzU0NDUzNSAxMi45NTEwNzc2LDQuNzUyNTEzMzkgMTIuODYzMjc4Niw0LjY1OTY3MzI1IEw5LjU1MDI3MjcyLDEuMTU2NDQ2OTcgQzkuNDU1ODMwNjksMS4wNTY1ODI0NCA5LjMyNDQ0MzEzLDEgOS4xODY5OTQxNSwxIEwzLjUsMSBaIE0zLjUsMCBMOS4xODY5OTQxNSwwIEM5LjU5OTM0MTA4LDAgOS45OTM1MDM3NywwLjE2OTc0NzMwNyAxMC4yNzY4Mjk4LDAuNDY5MzQwOTA3IEwxMy41ODk4MzU3LDMuOTcyNTY3MTkgQzEzLjg1MzIzMjgsNC4yNTEwODc2MiAxNCw0LjYxOTg4MzUgMTQsNS4wMDMyMjYyOCBMMTQsMTIuNSBDMTQsMTMuMzI4NDI3MSAxMy4zMjg0MjcxLDE0IDEyLjUsMTQgTDMuNSwxNCBDMi42NzE1NzI4OCwxNCAyLDEzLjMyODQyNzEgMiwxMi41IEwyLDEuNSBDMiwwLjY3MTU3Mjg3NSAyLjY3MTU3Mjg4LDAgMy41LDAgWiIgaWQ9IlJlY3RhbmdsZS03LUNvcHkiIGZpbGw9IiMzQzczQjkiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAyLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9IlBhdGgtMTQiIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMTEuMzAwOTAzMyAxMy4zMjU2ODM2IDExLjQzMTI3NDQgNC44MTg5Njk3MyA3LjY0NzQ2MDk0IDAuNzMzNjQyNTc4IDAuNjgxNjQwNjI1IDAuNzMzNjQyNTc4IDAuNjgxNjQwNjI1IDEzLjMyNTY4MzYiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xLjUsMSBDMS4yMjM4NTc2MywxIDEsMS4yMjM4NTc2MyAxLDEuNSBMMSwxMi41IEMxLDEyLjc3NjE0MjQgMS4yMjM4NTc2MywxMyAxLjUsMTMgTDEwLjUsMTMgQzEwLjc3NjE0MjQsMTMgMTEsMTIuNzc2MTQyNCAxMSwxMi41IEwxMSw1LjAwMzIyNjI4IEMxMSw0Ljg3NTQ0NTM1IDEwLjk1MTA3NzYsNC43NTI1MTMzOSAxMC44NjMyNzg2LDQuNjU5NjczMjUgTDcuNTUwMjcyNzIsMS4xNTY0NDY5NyBDNy40NTU4MzA2OSwxLjA1NjU4MjQ0IDcuMzI0NDQzMTMsMSA3LjE4Njk5NDE1LDEgTDEuNSwxIFogTTEuNSwwIEw3LjE4Njk5NDE1LDAgQzcuNTk5MzQxMDgsMCA3Ljk5MzUwMzc3LDAuMTY5NzQ3MzA3IDguMjc2ODI5ODQsMC40NjkzNDA5MDcgTDExLjU4OTgzNTcsMy45NzI1NjcxOSBDMTEuODUzMjMyOCw0LjI1MTA4NzYyIDEyLDQuNjE5ODgzNSAxMiw1LjAwMzIyNjI4IEwxMiwxMi41IEMxMiwxMy4zMjg0MjcxIDExLjMyODQyNzEsMTQgMTAuNSwxNCBMMS41LDE0IEMwLjY3MTU3Mjg3NSwxNCAwLDEzLjMyODQyNzEgMCwxMi41IEwwLDEuNSBDMCwwLjY3MTU3Mjg3NSAwLjY3MTU3Mjg3NSwwIDEuNSwwIFoiIGlkPSJSZWN0YW5nbGUtNyIgZmlsbD0iIzNDNzNCOSIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+DQogICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4yOTM0NTcwMywwLjc0MDI4MTExMyBMNi4yOTM0NTcwMywzLjk1MjI3MDUxIEw2LjI5MzQ1NzAzLDMuOTUyMjcwNTEgQzYuMjkzNDU3MDMsNC41MDQ1NTUyNiA2Ljc0MTE3MjI4LDQuOTUyMjcwNTEgNy4yOTM0NTcwMyw0Ljk1MjI3MDUxIEwxMS4zMjE2NTUzLDQuOTUyMjcwNTEgQzEwLjA5MjY5NDksMy4xMDgxMjk5MSA5LjA4NjI2NTksMS44MTgzMzQ5OSA4LjMwMjM2ODE2LDEuMDgyODg1NzQgQzcuNTE4NDcwNDMsMC4zNDc0MzY0OTggNi44NDg4MzMzOCwwLjIzMzIzNDk1NSA2LjI5MzQ1NzAzLDAuNzQwMjgxMTEzIFoiIGlkPSJQYXRoLTgiIGZpbGw9IiMzQzczQjkiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},6369:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgdmlld0JveD0iMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDcuMSAoNDU0MjIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Hcm91cCAxNyBDb3B5PC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IjIuMemjjuagvOiwg+aVtCIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJHcm91cC0xNy1Db3B5Ij4NCiAgICAgICAgICAgIDxnIGlkPSJHcm91cC01MCI+DQogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS02IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjwvcmVjdD4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDxwYXRoIGQ9Ik03Ljk3NDM5NTg3LDEwLjk3NDI3OTYgQzguMDEzMjE4NDEsMTEuMDA4OTQ1MyA4LjA2MTc1MTgsMTEuMDA1NjM0OSA4LjA4OTY0NDU1LDEwLjk3MzY1ODcgTDEyLjQwMDU2NjQsNi4wMzE2MjA0OCBMOS42MTI2NjgxOCw2LjAzMTYyMDQ4IEw5LjYxMjY2ODE4LDEuMDc2ODMwMTUgQzkuNjEyNjY4MTgsMS4wMzQzOTgwMyA5LjU3ODI3MDE1LDEgOS41MzU4MzgwMywxIEw2LjQwMTE3MzE3LDEgQzYuMzU4NzQxMDUsMSA2LjMyNDM0MzAyLDEuMDM0Mzk4MDMgNi4zMjQzNDMwMiwxLjA3NjgzMDE1IEw2LjMyNDM0MzAyLDYuMDMxNjIwNDggTDMuNTY4MjY1NzksNi4wMzE2MjA0OCBMNy45NzQzOTU4NywxMC45NzQyNzk2IFogTTkuNTM1ODM4MDMsMCBDMTAuMTMwNTU0OSwtNi4xMTg2Nzk2OWUtMTMgMTAuNjEyNjY4MiwwLjQ4MjExMzI4IDEwLjYxMjY2ODIsMS4wNzY4MzAxNSBMMTAuNjEyNjY4Miw1LjAzMTYyMDQ4IEwxMy40MTU3MjM1LDUuMDMxNjIwNDggQzEzLjcxMzA4Miw1LjAzMTYyMDQ4IDEzLjk1NDEzODYsNS4yNzI2NzcxMiAxMy45NTQxMzg2LDUuNTcwMDM1NTUgQzEzLjk1NDEzODYsNS43MDAxNjc4OSAxMy45MDcwMDc4LDUuODI1ODk2NzkgMTMuODIxNDY1Myw1LjkyMzk2MjY0IEw4Ljg0MzIzMDA3LDExLjYzMTAwODYgQzguNDUyMjkzMDEsMTIuMDc5MTc4NiA3Ljc3MjA2MjMxLDEyLjEyNTU3NTEgNy4zMjM4OTIyOSwxMS43MzQ2MzggQzcuMjg5OTUzMzUsMTEuNzA1MDMzMiA3LjI1NzkwNTEsMTEuNjczMzI4NCA3LjIyNzkzNjM1LDExLjYzOTcxMDQgTDIuMTM2NTE1NTEsNS45MjgzMTM1NCBDMS45Mzg2NDQwNCw1LjcwNjM0NzUxIDEuOTU4MTc2NTQsNS4zNjYwMDE5NiAyLjE4MDE0MjU4LDUuMTY4MTMwNDkgQzIuMjc4NzcyNjYsNS4wODAyMDY3NyAyLjQwNjI5MDA1LDUuMDMxNjIwNDggMi41Mzg0MjA1Nyw1LjAzMTYyMDQ4IEw1LjMyNDM0MzAyLDUuMDMxNjIwNDggTDUuMzI0MzQzMDIsMS4wNzY4MzAxNSBDNS4zMjQzNDMwMiwwLjQ4MjExMzI4IDUuODA2NDU2MywxLjY3ODUxMjM2ZS0xMiA2LjQwMTE3MzE3LDEuNDY1NzA5NTFlLTEyIEw5LjUzNTgzODAzLDAgWiIgaWQ9IkNvbWJpbmVkLVNoYXBlLUNvcHkiIGZpbGw9IiMzQzczQjkiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPg0KICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZS00OSIgZmlsbD0iIzNDNzNCOSIgeD0iMCIgeT0iMTQiIHdpZHRoPSIxNiIgaGVpZ2h0PSIyIiByeD0iMC44MDAwMDAwMTIiPjwvcmVjdD4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},"6d47":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"host_model"},[t._v(t._s(t.info&&t.info.model))]),s("div",{staticClass:"buttons",on:{click:function(e){t.modalVisible=!0}}},[s("a",{staticClass:"button reload"}),t._v(" "),s("a",{staticClass:"button",staticStyle:{"margin-right":"30px",color:"rgb(60, 115, 185)"}},[t._v("上传许可证")])]),s("div",{staticClass:"basic"},[s("div",{staticClass:"basic_license_info"},[s("div",{staticClass:"basic_license_left"},[s("div",{staticClass:"basic_license_icon enterprise",staticStyle:{width:"141px",height:"115px",margin:"0px auto"}}),s("div",{staticClass:"basic_license_title"},[s("h4",{staticClass:"basic_license_name"},[t._v(t._s(t.productType)+" v3.6 "),t.info&&!t.info.expired?s("span",{staticClass:"basic_license_status valid"},[t._v("有效")]):t._e(),t.info&&t.info.expired?s("span",{staticClass:"basic_license_status expired"},[t._v("已过期")]):t._e(),t.info&&1==t.info.isDedup?s("span",{staticClass:"basic_license_status valid"},[t._v("重删")]):t._e()])]),s("div",{staticClass:"basic_license_details"},[s("div",{staticClass:"basic_license_detail"},[s("span",{staticClass:"basic_license_detail-num"},[t._v(t._s(t.info?t.info.instanceCount:0))]),s("span",{staticClass:"basic_license_detail-title"},[t._v("实例数量")])])])]),s("div",{staticClass:"basic_license_right"},[s("div",{staticClass:"basic_license_right-inner"},[s("div",{staticClass:"detail_items"},[s("div",{staticClass:"detail_item"},[s("span",{staticClass:"detail_item-name"},[t._v("授权用户:")]),s("span",{staticClass:"detail_item-value"},[t._v(t._s(t.info&&t.info.customerName))])]),s("div",{staticClass:"detail_item"},[s("span",{staticClass:"detail_item-name"},[t._v("签发时间:")]),s("span",{staticClass:"detail_item-value"},[t._v(t._s(t._f("format")(t.info&&t.info.signDate)))])]),s("div",{staticClass:"detail_item"},[s("span",{staticClass:"detail_item-name"},[t._v("请求码:")]),s("span",{staticClass:"detail_item-value license_request"},[t._v(" "+t._s(t.requestCode)+" ")]),s("a",{staticStyle:{cursor:"pointer","margin-right":"10px"}},[s("img",{staticClass:"copy",attrs:{src:i("553b")},on:{click:t.copy}})]),s("a",{attrs:{href:"/api/license/downloadRequestCode"}},[s("img",{staticClass:"download",attrs:{src:i("6369")}})])]),s("div",{staticClass:"detail_item"},[s("span",{staticClass:"detail_item-name"},[t._v("到期时间:")]),t.info&&1!=t.info.type?s("span",{staticClass:"detail_item-value"},[t._v(t._s(t._f("format")(t.info&&t.info.expireDate)))]):t._e(),t.info&&1==t.info.type?s("span",{staticClass:"detail_item-value"},[t._v("永久有效")]):t._e()]),s("div",{staticClass:"detail_item"},[s("span",{staticClass:"detail_item-name"},[t._v("服务期限:")]),s("span",{staticClass:"detail_item-value"},[t._v(t._s(t._f("format")(t.info&&t.info.serviceDate)))])])]),t._m(0)])])]),t._m(1)]),s("div",{staticClass:"modules"},[t.info&&t.info.fileRepCount>0?s("div",{staticClass:"module disaster_backup",staticStyle:{"margin-right":"20px"}},[s("span",{staticClass:"module_count"},[t._v("许可数量："),s("b",[t._v(t._s(t.info.fileRepCount))]),t._v(" 条")]),s("div",{staticClass:"module_title"},[s("h4",{staticClass:"module_title-name"},[t._v("文件复制 "),t.info.expired?t._e():s("div",{staticClass:"module_title-status valid"},[t._v("有效")]),t.info.expired?s("div",{staticClass:"module_title-status expired"},[t._v("已过期")]):t._e()]),s("div",{staticClass:"module_title-intro"},[t._v("文件复制策略条数限制")])])]):t._e(),t.info&&t.info.oracleRepCount>0?s("div",{staticClass:"module disaster_backup",staticStyle:{"margin-right":"20px"}},[s("span",{staticClass:"module_count"},[t._v("许可数量："),s("b",[t._v(t._s(t.info.oracleRepCount))]),t._v(" 条")]),s("div",{staticClass:"module_title"},[s("h4",{staticClass:"module_title-name"},[t._v("Oracle复制 "),t.info.expired?t._e():s("div",{staticClass:"module_title-status valid"},[t._v("有效")]),t.info.expired?s("div",{staticClass:"module_title-status expired"},[t._v("已过期")]):t._e()]),s("div",{staticClass:"module_title-intro"},[t._v("Oracle复制策略条数限制")])])]):t._e(),t.info&&t.info.sqlserverRepCount>0?s("div",{staticClass:"module disaster_backup",staticStyle:{"margin-right":"20px"}},[s("span",{staticClass:"module_count"},[t._v("许可数量："),s("b",[t._v(t._s(t.info.sqlserverRepCount))]),t._v(" 条")]),s("div",{staticClass:"module_title"},[s("h4",{staticClass:"module_title-name"},[t._v("SqlServer复制 "),t.info.expired?t._e():s("div",{staticClass:"module_title-status valid"},[t._v("有效")]),t.info.expired?s("div",{staticClass:"module_title-status expired"},[t._v("已过期")]):t._e()]),s("div",{staticClass:"module_title-intro"},[t._v("SqlServer复制策略条数限制")])])]):t._e(),t.info&&t.info.vmwareRepCount>0?s("div",{staticClass:"module disaster_backup"},[s("span",{staticClass:"module_count"},[t._v("许可数量："),s("b",[t._v(t._s(t.info.vmwareRepCount))]),t._v(" 条")]),s("div",{staticClass:"module_title"},[s("h4",{staticClass:"module_title-name"},[t._v("Vmware复制 "),t.info.expired?t._e():s("div",{staticClass:"module_title-status valid"},[t._v("有效")]),t.info.expired?s("div",{staticClass:"module_title-status expired"},[t._v("已过期")]):t._e()]),s("div",{staticClass:"module_title-intro"},[t._v("Vmware复制策略条数限制")])])]):t._e()]),s("Modal",{attrs:{title:"上传许可证","class-name":"vertical-center-modal",width:"600"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[s("Upload",{attrs:{headers:t.accessToken,"on-success":t.uploadSuccess,type:"drag",action:"/api/license/upload"}},[s("div",{staticStyle:{padding:"50px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),s("p",[t._v("选择或拖放文件到这里")])],1)])],1)],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("如您需要升级到其它版本或更新许可证，请将您的请求码和升级需求发送电子邮件至 "),i("a",{staticStyle:{color:"rgb(60, 115, 185)","text-decoration":"none"},attrs:{href:"mailto:support@mingheinfo.com"}},[t._v("support@mingheinfo.com")]),t._v("，我们将尽快与您联系！")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basic_license_introduction"},[i("div",{staticClass:"license_intro_item"},[i("span",{staticClass:"check_icon"}),i("span",{staticClass:"license_intro_item-text"},[t._v("可使用明和AEGIS平台软件的全部功能")])]),i("div",{staticClass:"license_intro_item"},[i("span",{staticClass:"check_icon"}),i("span",{staticClass:"license_intro_item-text"},[t._v("付费授权使用")])]),i("div",{staticClass:"license_intro_item"},[i("span",{staticClass:"check_icon"}),i("span",{staticClass:"license_intro_item-text"},[t._v("在许可证授权期限内使用")])]),i("div",{staticClass:"license_intro_item"},[i("span",{staticClass:"check_icon"}),i("span",{staticClass:"license_intro_item-text"},[t._v("可管理的有限客户端数量")])]),i("div",{staticClass:"license_intro_item"},[i("span",{staticClass:"check_icon"}),i("span",{staticClass:"license_intro_item-text"},[t._v("在售后服务期内可获得官方售后技术支持服务")])]),i("div",{staticClass:"license_intro_item"},[i("span",{staticClass:"check_icon"}),i("span",{staticClass:"license_intro_item-text"},[t._v("该版本适于企业生产环境部署")])])])}],o=i("365c"),l=i("62a2"),n={name:"about-manage",data:function(){return{loading:!0,operationLoading:!1,modalVisible:!1,requestCode:"",productType:"",info:null,accessToken:{},submitLoading:!1}},methods:{copy:function(){var t=this;Object(l["a"])(t.requestCode),this.$Notice.success({title:"信息",desc:"请求码已复制到粘贴板",duration:5})},init:function(){var t=this;this.accessToken={accessToken:this.getStore("accessToken")},this.loading=!0,Object(o["zb"])({}).then((function(e){if(t.loading=!1,!0===e.success)t.requestCode=e.result;else{var i=e.msg;void 0==e.success&&(i=e),t.$Notice.error({title:"错误信息",desc:i,duration:5})}})),Object(o["yb"])({}).then((function(e){if(t.loading=!1,!0===e.success){var i=e.result;if(null==i)return;1==i.type?(t.productType="付费版",i.expired=!1):(t.productType="试用版",i.expired=t.isExpired(i.expireDate)),t.info=i}else{var s=e.msg;void 0==e.success&&(s=e),t.$Notice.error({title:"错误信息",desc:s,duration:5})}}))},uploadSuccess:function(t,e){if(!0===t.success){var i=t.result;1==i.type?(this.productType="付费版",i.expired=!1):(this.productType="试用版",i.expired=this.isExpired(i.expireDate)),this.info=i}else{var s=t.msg;void 0==t.success&&(s=t),this.$Notice.error({title:"错误信息",desc:s,duration:5})}},ok:function(){},cancel:function(){},isExpired:function(t){var e=new Date(t),i=new Date;return i.getTime()>e.getTime()}},mounted:function(){this.init()},filters:{format:function(t){return void 0==t||null==t||""==t?"":t.replace("T"," ").substring(0,10)},getAgentName:function(t){for(var e in constAgentType)if(constAgentType[e].value==t)return constAgentType[e].name;return""},getAgentDesc:function(t){for(var e in constAgentType)if(constAgentType[e].value==t)return constAgentType[e].desc;return""}}},c=n,r=(i("1e8a"),i("2877")),d=Object(r["a"])(c,s,a,!1,null,"ee761688",null);e["default"]=d.exports},a1d3:function(t,e,i){"use strict";var s=i("a2c6"),a=i.n(s);a.a},a2c6:function(t,e,i){},b53e:function(t,e,i){},bfb3:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search"},[i("Card",[i("Row",{attrs:{type:"flex",justify:"space-between"}},[t.expand?i("Col",{attrs:{span:"5"}},[i("Row",{staticClass:"operation"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addDcit}},[t._v("添加字典")]),i("Dropdown",{on:{"on-click":t.handleDropdown}},[i("Button",[t._v(" 更多操作 "),i("Icon",{attrs:{type:"md-arrow-dropdown"}})],1),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",{attrs:{name:"editDcit"}},[t._v("编辑字典")]),i("DropdownItem",{attrs:{name:"delDcit"}},[t._v("删除字典")]),i("DropdownItem",{attrs:{name:"refreshDcit"}},[t._v("刷新")])],1)],1)],1),i("Alert",{attrs:{"show-icon":""}},[t._v(" 当前选择： "),i("span",{staticClass:"select-title"},[t._v(t._s(t.editTitle))]),t.editTitle?i("a",{staticClass:"select-clear",on:{click:t.cancelEdit}},[t._v("取消选择")]):t._e()]),i("Input",{attrs:{suffix:"ios-search",placeholder:"输入搜索字典",clearable:""},on:{"on-change":t.search},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),i("div",{staticClass:"tree-bar",style:{maxHeight:t.maxHeight}},[i("Tree",{ref:"tree",attrs:{data:t.treeData},on:{"on-select-change":t.selectTree}}),t.treeLoading?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)],1):t._e(),i("div",{staticClass:"expand"},[i("Icon",{staticClass:"icon",attrs:{type:t.expandIcon,size:"16"},on:{click:t.changeExpand}})],1),i("Col",{attrs:{span:t.span}},[i("Row",{directives:[{name:"show",rawName:"v-show",value:t.openSearch,expression:"openSearch"}],nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)}}},[i("Form",{ref:"searchForm",attrs:{model:t.searchForm,inline:"","label-width":70}},[i("Form-item",{attrs:{label:"数据名称",prop:"title"}},[i("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"请输入",clearable:""},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1),i("Form-item",{attrs:{label:"状态",prop:"status"}},[i("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[i("Option",{attrs:{value:"0"}},[t._v("正常")]),i("Option",{attrs:{value:"-1"}},[t._v("禁用")])],1)],1),i("Form-item",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v("搜索")]),i("Button",{on:{click:t.handleReset}},[t._v("重置")])],1)],1)],1),i("Row",{staticClass:"operation"},[i("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v("添加数据")]),i("Button",{attrs:{icon:"md-trash"},on:{click:t.delAll}},[t._v("批量删除")]),i("Button",{attrs:{icon:"md-refresh"},on:{click:t.getDataList}},[t._v("刷新数据")]),i("Button",{attrs:{type:"dashed"},on:{click:function(e){t.openSearch=!t.openSearch}}},[t._v(t._s(t.openSearch?"关闭搜索":"开启搜索"))]),i("Button",{attrs:{type:"dashed"},on:{click:function(e){t.openTip=!t.openTip}}},[t._v(t._s(t.openTip?"关闭提示":"开启提示"))])],1),i("Row",{directives:[{name:"show",rawName:"v-show",value:t.openTip,expression:"openTip"}]},[i("Alert",{attrs:{"show-icon":""}},[t._v(" 已选择 "),i("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" 项 "),i("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v("清空")])])],1),i("Row",[i("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.showSelect}})],1),i("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{current:t.searchForm.pageNumber,total:t.total,"page-size":t.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)],1)],1),i("Modal",{attrs:{title:t.dictModalTitle,"mask-closable":!1,width:500},model:{value:t.dictModalVisible,callback:function(e){t.dictModalVisible=e},expression:"dictModalVisible"}},[i("Form",{ref:"dictForm",attrs:{model:t.dictForm,"label-width":85,rules:t.dictFormValidate}},[i("FormItem",{attrs:{label:"字典名称",prop:"title"}},[i("Input",{model:{value:t.dictForm.title,callback:function(e){t.$set(t.dictForm,"title",e)},expression:"dictForm.title"}})],1),i("FormItem",{staticClass:"block-tool",attrs:{label:"字典类型",prop:"type"}},[i("Tooltip",{attrs:{placement:"right","max-width":220,transfer:"",content:"建议英文名且需唯一 非开发人员谨慎修改"}},[i("Input",{model:{value:t.dictForm.type,callback:function(e){t.$set(t.dictForm,"type",e)},expression:"dictForm.type"}})],1)],1),i("FormItem",{attrs:{label:"备注",prop:"description"}},[i("Input",{model:{value:t.dictForm.description,callback:function(e){t.$set(t.dictForm,"description",e)},expression:"dictForm.description"}})],1),i("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[i("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[i("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.dictForm.sortOrder,callback:function(e){t.$set(t.dictForm,"sortOrder",e)},expression:"dictForm.sortOrder"}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:function(e){t.dictModalVisible=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handelSubmitDict}},[t._v("提交")])],1)],1),i("Modal",{attrs:{title:t.modalTitle,"mask-closable":!1,width:500},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[i("Form",{ref:"form",attrs:{model:t.form,"label-width":80,rules:t.formValidate}},[i("FormItem",{attrs:{label:"名称",prop:"title"}},[i("Input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("FormItem",{attrs:{label:"数据值",prop:"value"}},[i("Input",{model:{value:t.form.value,callback:function(e){t.$set(t.form,"value",e)},expression:"form.value"}})],1),i("FormItem",{attrs:{label:"备注",prop:"description"}},[i("Input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),i("FormItem",{attrs:{label:"排序值",prop:"sortOrder"}},[i("Tooltip",{attrs:{trigger:"hover",placement:"right",content:"值越小越靠前，支持小数"}},[i("InputNumber",{attrs:{max:1e3,min:0},model:{value:t.form.sortOrder,callback:function(e){t.$set(t.form,"sortOrder",e)},expression:"form.sortOrder"}})],1)],1),i("FormItem",{attrs:{label:"是否启用",prop:"status"}},[i("i-switch",{attrs:{size:"large","true-value":0,"false-value":-1},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[i("span",{attrs:{slot:"open"},slot:"open"},[t._v("启用")]),i("span",{attrs:{slot:"close"},slot:"close"},[t._v("禁用")])])],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:function(e){t.modalVisible=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.handelSubmit}},[t._v("提交")])],1)],1)],1)},a=[],o=i("365c"),l={name:"dic-manage",data:function(){var t=this;return{openSearch:!0,openTip:!0,treeLoading:!1,maxHeight:"500px",loading:!1,editTitle:"",searchKey:"",expand:!0,span:18,expandIcon:"ios-arrow-back",selectNode:{},treeData:[],selectCount:0,selectList:[],searchForm:{name:"",status:"",pageNumber:1,pageSize:10,sort:"sortOrder",order:"asc"},modalType:0,modalVisible:!1,dictModalVisible:!1,dictModalTitle:"",modalTitle:"",dictForm:{title:"",type:"",description:"",sortOrder:0},form:{title:"",value:"",status:0,description:"",sortOrder:0},dictFormValidate:{title:[{required:!0,message:"不能为空",trigger:"blur"}],type:[{required:!0,message:"不能为空",trigger:"blur"}],sortOrder:[{required:!0,type:"number",message:"排序值不能为空",trigger:"blur"}]},formValidate:{title:[{required:!0,message:"不能为空",trigger:"blur"}],value:[{required:!0,message:"不能为空",trigger:"blur"}],sortOrder:[{required:!0,type:"number",message:"排序值不能为空",trigger:"blur"}]},columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:"名称",key:"title",minWidth:150,sortable:!0},{title:"数据值",key:"value",width:150,sortable:!0},{title:"备注",key:"description",width:150,sortable:!0},{title:"排序值",key:"sortOrder",width:100,sortable:!0,sortType:"asc"},{title:"状态",key:"status",align:"center",width:130,render:function(t,e){return 0==e.row.status?t("div",[t("Badge",{props:{status:"success",text:"正常启用"}})]):-1==e.row.status?t("div",[t("Badge",{props:{status:"error",text:"禁用"}})]):void 0}},{title:"创建时间",key:"createTime",width:250,sortable:!0},{title:"操作",key:"action",width:160,align:"center",fixed:"right",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.edit(i.row)}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(i.row)}}},"删除")])}}],submitLoading:!1,data:[],total:0}},methods:{init:function(){this.getAllDict(),this.getDataList()},getAllDict:function(){var t=this;this.treeLoading=!0,Object(o["bb"])().then((function(e){t.treeLoading=!1,e.success&&(t.treeData=e.result)}))},search:function(){var t=this;this.searchKey?(this.treeLoading=!0,Object(o["Bc"])({key:this.searchKey}).then((function(e){t.treeLoading=!1,e.success&&(t.treeData=e.result)}))):this.getAllDict()},selectTree:function(t){if(t.length>0){for(var e in this.$refs.dictForm.resetFields(),t[0])null==t[0][e]&&(t[0][e]="");var i=JSON.stringify(t[0]),s=JSON.parse(i);this.selectNode=s,this.dictForm=s,this.editTitle=s.title+"("+s.type+")",this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()}else this.cancelEdit()},cancelEdit:function(){var t=this.$refs.tree.getSelectedNodes()[0];t&&(t.selected=!1),this.selectNode={},this.editTitle="",this.getDataList()},changeSelect:function(t){this.selectCount=t.length,this.selectList=t},changeExpand:function(){this.expand=!this.expand,this.expand?(this.expandIcon="ios-arrow-back",this.span=18):(this.expandIcon="ios-arrow-forward",this.span=23)},changePage:function(t){this.searchForm.pageNumber=t,this.getDataList(),this.clearSelectAll()},changePageSize:function(t){this.searchForm.pageSize=t,this.getDataList()},getDataList:function(){var t=this;this.loading=!0,this.selectNode.id?this.searchForm.dictId=this.selectNode.id:delete this.searchForm.dictId,this.searchForm.status||(this.searchForm.status=""),Object(o["ab"])(this.searchForm).then((function(e){t.loading=!1,e.success&&(t.data=e.result.records,t.total=e.result.total)}))},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getDataList()},changeSort:function(t){this.searchForm.sort=t.key,this.searchForm.order=t.order,"normal"==t.order&&(this.searchForm.order=""),this.getDataList()},showSelect:function(t){this.selectList=t,this.selectCount=t.length},clearSelectAll:function(){this.$refs.table.selectAll(!1)},refreshDict:function(){this.getAllDict(),this.selectNode={},this.editTitle="",this.getDataList()},handleDropdown:function(t){if("editDcit"==t){if(!this.selectNode.id)return void this.$Message.warning("您还未选择要编辑的字典");this.editDcit()}else"delDcit"==t?this.delDcit():"refreshDcit"==t&&this.refreshDict()},addDcit:function(){this.modalType=0,this.dictModalTitle="添加字典",this.$refs.dictForm.resetFields(),this.dictModalVisible=!0},editDcit:function(){this.modalType=1,this.dictModalTitle="编辑字典",this.dictModalVisible=!0},delDcit:function(){var t=this;this.selectNode.id?this.$Modal.confirm({title:"确认删除",loading:!0,content:"您确认要删除 "+this.selectNode.title+" ?",onOk:function(){Object(o["u"])(t.selectNode.id).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.refreshDict())}))}}):this.$Message.warning("您还未选择要删除的字典")},add:function(){this.selectNode.id?(this.modalType=0,this.modalTitle="添加字典 "+this.editTitle+" 的数据",this.$refs.form.resetFields(),this.modalVisible=!0):this.$Message.warning("请先选择一个字典类别")},edit:function(t){for(var e in this.modalType=1,this.modalTitle="编辑字典 "+this.editTitle+" 的数据",this.$refs.form.resetFields(),t)null==t[e]&&(t[e]="");var i=JSON.stringify(t),s=JSON.parse(i);this.form=s,this.modalVisible=!0},handelSubmitDict:function(){var t=this;this.$refs.dictForm.validate((function(e){e&&(t.submitLoading=!0,0==t.modalType?(delete t.dictForm.id,Object(o["b"])(t.dictForm).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getAllDict(),t.dictModalVisible=!1)}))):1==t.modalType&&Object(o["H"])(t.dictForm).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getAllDict(),t.dictModalVisible=!1)})))}))},handelSubmit:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.submitLoading=!0,0==t.modalType?(delete t.form.id,t.form.dictId=t.selectNode.id,Object(o["c"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getDataList(),t.modalVisible=!1)}))):1==t.modalType&&Object(o["I"])(t.form).then((function(e){t.submitLoading=!1,e.success&&(t.$Message.success("操作成功"),t.getDataList(),t.modalVisible=!1)})))}))},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除 "+t.title+" ?",loading:!0,onOk:function(){Object(o["s"])(t.id).then((function(t){e.$Modal.remove(),t.success&&(e.$Message.success("操作成功"),e.getDataList())}))}})},delAll:function(){var t=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",loading:!0,onOk:function(){var e="";t.selectList.forEach((function(t){e+=t.id+","})),e=e.substring(0,e.length-1),Object(o["s"])(e).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("操作成功"),t.clearSelectAll(),t.getDataList())}))}})}},mounted:function(){var t=document.documentElement.clientHeight;this.maxHeight=Number(t-287)+"px",this.init()}},n=l,c=(i("a1d3"),i("2877")),r=Object(c["a"])(n,s,a,!1,null,null,null);e["default"]=r.exports}}]);